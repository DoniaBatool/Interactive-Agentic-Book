"use strict";(globalThis.webpackChunkphysical_ai_robotics_book=globalThis.webpackChunkphysical_ai_robotics_book||[]).push([[762],{5690(e,s,a){a.r(s),a.d(s,{default:()=>l});var t=a(6540),r=a(2360),o=a(96),i=a(3),n=a(4848);function l(){const{t:e}=(0,o.B)(),[s,a]=(0,t.useState)(""),[l,d]=(0,t.useState)(""),[h,c]=(0,t.useState)(""),[u,w]=(0,t.useState)(!1),[x,p]=(0,t.useState)(null),[j,m]=(0,t.useState)(null),[f,v]=(0,t.useState)(!1),[g,k]=(0,t.useState)(!1),b=i.DB;(0,t.useEffect)(()=>{if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("token");e&&a(e)}},[]);return s?(0,n.jsx)(r.A,{title:e("auth.resetPassword"),description:e("auth.setNewPassword"),children:(0,n.jsx)("div",{className:"auth-container",children:(0,n.jsxs)("div",{className:"auth-card",children:[(0,n.jsxs)("div",{className:"auth-header",children:[(0,n.jsx)("h1",{children:e("auth.resetPassword")}),(0,n.jsx)("p",{children:e("auth.setNewPassword")})]}),(0,n.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),m(null),p(null),l===h)if(l.length<8)m(e("auth.passwordTooShort"));else if(s){w(!0);try{const e=await fetch(`${b}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:s,newPassword:l})});if(!e.ok){let s="Failed to reset password";try{const a=await e.json();s=a.message||a.error||s}catch{s=`Server error: ${e.status} ${e.statusText}`}return void m(s)}await e.json();e.ok&&(p("Password reset successful! Redirecting to sign in..."),setTimeout(()=>{window.location.href="/auth/signin"},2e3))}catch(t){console.error("Reset password error:",t),m(`Network error: ${t.message||"Please check if the server is running."}`)}finally{w(!1)}}else m("Invalid reset token");else m(e("auth.passwordsDoNotMatch"))},className:"auth-form",children:[j&&(0,n.jsx)("div",{className:"auth-error",children:j}),x&&(0,n.jsx)("div",{className:"auth-success",children:x}),(0,n.jsxs)("div",{className:"auth-field",children:[(0,n.jsx)("label",{htmlFor:"password",children:e("auth.newPassword")}),(0,n.jsxs)("div",{className:"auth-password-wrapper",children:[(0,n.jsx)("input",{type:f?"text":"password",id:"password",name:"password",value:l,onChange:e=>d(e.target.value),required:!0,placeholder:e("auth.newPassword"),autoComplete:"new-password"}),(0,n.jsx)("button",{type:"button",className:"auth-password-toggle",onClick:()=>v(!f),"aria-label":e(f?"auth.hidePassword":"auth.showPassword"),children:f?(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),(0,n.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,n.jsxs)("div",{className:"auth-field",children:[(0,n.jsx)("label",{htmlFor:"confirmPassword",children:e("auth.confirmPassword")}),(0,n.jsxs)("div",{className:"auth-password-wrapper",children:[(0,n.jsx)("input",{type:g?"text":"password",id:"confirmPassword",name:"confirmPassword",value:h,onChange:e=>c(e.target.value),required:!0,placeholder:e("auth.confirmPassword"),autoComplete:"new-password"}),(0,n.jsx)("button",{type:"button",className:"auth-password-toggle",onClick:()=>k(!g),"aria-label":e(g?"auth.hidePassword":"auth.showPassword"),children:g?(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),(0,n.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,n.jsx)("button",{type:"submit",className:"auth-submit",disabled:u,children:e(u?"auth.resetting":"auth.resetPassword")}),(0,n.jsx)("div",{className:"auth-footer",children:(0,n.jsx)("a",{href:"/auth/signin",children:e("auth.backToSignIn")})})]})]})})}):(0,n.jsx)(r.A,{title:e("auth.resetPassword"),children:(0,n.jsx)("div",{className:"auth-container",children:(0,n.jsxs)("div",{className:"auth-card",children:[(0,n.jsx)("div",{className:"auth-error",children:"Invalid or missing reset token. Please check your email link."}),(0,n.jsx)("div",{className:"auth-footer",children:(0,n.jsx)("a",{href:"/auth/forgot-password",children:"Request new reset link"})})]})})})}}}]);